@model Exam_system.UI.ViewModels.AddExamViewModel
@{ 
    ViewBag.Title = "Create New Exam";
}
    <div class="container" style="margin-top: 30px;">
        @using (Html.BeginForm(FormMethod.Post))
        {
            <div class="form-group">
                @Html.LabelFor(model => model.ExamName, new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.TextBoxFor(model => model.ExamName, new { @class = "form-control" })
                    @Html.ValidationMessageFor(model => model.ExamName, "Exam Name is Required", new { @class="text-danger" })
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.Subject, new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.DropDownListFor(model => model.Subject, new SelectList(Model.Subjects, "Name", "Name"), new { @class = "form-control", onchange = "getQuest(event)", id = "subs" })
                </div>
            </div>

            <div class="form-group">
                <label style="padding-top: 20px !important;" class="control-label col-md-2">Questions</label>
                <div class="col-md-10" style="padding-top: 20px !important;">
                    <select name="model.Questions" id="quests" class="form-control" multiple>
                    </select>
                </div>
            </div>

            <button type="submit" class="btn btn-default">Create Exam</button>
        }
    </div>

@section getQuestions{
    <script>
        window.addEventListener('load', function () {
            const quests = document.querySelector("#quests");
            $.ajax({
                url: "https://localhost:44328/Question/Questions?name="+ $("#subs").val(),
                success: function (html) {
                    quests.innerHTML = html;
                }
            })
        });
        function getQuest(e) {
            const quests = document.querySelector("#quests");
            $.ajax({
                url: "https://localhost:44328/Question/Questions?name=" + e.target.value,
                success: function (html) {
                    quests.innerHTML = html;
                }
            })
        }
    </script>
}